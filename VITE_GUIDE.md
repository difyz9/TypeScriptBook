# Vite å®Œæ•´å­¦ä¹ æŒ‡å—

## ğŸ“š å­¦ä¹ å¤§çº²

### ç¬¬ 1 ç« ï¼šVite åŸºç¡€å…¥é—¨
- [1.1 Vite æ˜¯ä»€ä¹ˆ](#11-vite-æ˜¯ä»€ä¹ˆ)
- [1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Vite](#12-ä¸ºä»€ä¹ˆé€‰æ‹©-vite)
- [1.3 å®‰è£…å’Œå¿«é€Ÿå¼€å§‹](#13-å®‰è£…å’Œå¿«é€Ÿå¼€å§‹)
- [1.4 é¡¹ç›®ç»“æ„](#14-é¡¹ç›®ç»“æ„)
- [1.5 å¼€å‘æœåŠ¡å™¨](#15-å¼€å‘æœåŠ¡å™¨)

### ç¬¬ 2 ç« ï¼šé…ç½®è¯¦è§£
- [2.1 é…ç½®æ–‡ä»¶](#21-é…ç½®æ–‡ä»¶)
- [2.2 å¼€å‘é…ç½®](#22-å¼€å‘é…ç½®)
- [2.3 æ„å»ºé…ç½®](#23-æ„å»ºé…ç½®)
- [2.4 ç¯å¢ƒå˜é‡](#24-ç¯å¢ƒå˜é‡)
- [2.5 è·¯å¾„åˆ«å](#25-è·¯å¾„åˆ«å)

### ç¬¬ 3 ç« ï¼šæ’ä»¶ç³»ç»Ÿ
- [3.1 æ’ä»¶åŸºç¡€](#31-æ’ä»¶åŸºç¡€)
- [3.2 å®˜æ–¹æ’ä»¶](#32-å®˜æ–¹æ’ä»¶)
- [3.3 ç¤¾åŒºæ’ä»¶](#33-ç¤¾åŒºæ’ä»¶)
- [3.4 è‡ªå®šä¹‰æ’ä»¶](#34-è‡ªå®šä¹‰æ’ä»¶)
- [3.5 æ’ä»¶é…ç½®](#35-æ’ä»¶é…ç½®)

### ç¬¬ 4 ç« ï¼šæ¡†æ¶é›†æˆ
- [4.1 Vue é¡¹ç›®](#41-vue-é¡¹ç›®)
- [4.2 React é¡¹ç›®](#42-react-é¡¹ç›®)
- [4.3 Svelte é¡¹ç›®](#43-svelte-é¡¹ç›®)
- [4.4 Vanilla JS](#44-vanilla-js)
- [4.5 TypeScript æ”¯æŒ](#45-typescript-æ”¯æŒ)

### ç¬¬ 5 ç« ï¼šèµ„æºå¤„ç†
- [5.1 é™æ€èµ„æº](#51-é™æ€èµ„æº)
- [5.2 CSS å¤„ç†](#52-css-å¤„ç†)
- [5.3 é¢„å¤„ç†å™¨](#53-é¢„å¤„ç†å™¨)
- [5.4 PostCSS](#54-postcss)
- [5.5 å›¾ç‰‡å’Œå­—ä½“](#55-å›¾ç‰‡å’Œå­—ä½“)

### ç¬¬ 6 ç« ï¼šæ„å»ºä¼˜åŒ–
- [6.1 ç”Ÿäº§æ„å»º](#61-ç”Ÿäº§æ„å»º)
- [6.2 ä»£ç åˆ†å‰²](#62-ä»£ç åˆ†å‰²)
- [6.3 Tree Shaking](#63-tree-shaking)
- [6.4 Bundle åˆ†æ](#64-bundle-åˆ†æ)
- [6.5 æ€§èƒ½ä¼˜åŒ–](#65-æ€§èƒ½ä¼˜åŒ–)

### ç¬¬ 7 ç« ï¼šé«˜çº§åŠŸèƒ½
- [7.1 HMR (çƒ­æ¨¡å—æ›¿æ¢)](#71-hmr-çƒ­æ¨¡å—æ›¿æ¢)
- [7.2 ä¾èµ–é¢„æ„å»º](#72-ä¾èµ–é¢„æ„å»º)
- [7.3 å¤šé¡µé¢åº”ç”¨](#73-å¤šé¡µé¢åº”ç”¨)
- [7.4 åº“æ¨¡å¼](#74-åº“æ¨¡å¼)
- [7.5 SSR æ”¯æŒ](#75-ssr-æ”¯æŒ)

### ç¬¬ 8 ç« ï¼šéƒ¨ç½²å’Œ CI/CD
- [8.1 éƒ¨ç½²ç­–ç•¥](#81-éƒ¨ç½²ç­–ç•¥)
- [8.2 é™æ€éƒ¨ç½²](#82-é™æ€éƒ¨ç½²)
- [8.3 Docker éƒ¨ç½²](#83-docker-éƒ¨ç½²)
- [8.4 CI/CD é›†æˆ](#84-cicd-é›†æˆ)
- [8.5 ç¼“å­˜ç­–ç•¥](#85-ç¼“å­˜ç­–ç•¥)

### ç¬¬ 9 ç« ï¼šå¼€å‘å·¥å…·
- [9.1 IDE é…ç½®](#91-ide-é…ç½®)
- [9.2 è°ƒè¯•æŠ€å·§](#92-è°ƒè¯•æŠ€å·§)
- [9.3 æµ‹è¯•é›†æˆ](#93-æµ‹è¯•é›†æˆ)
- [9.4 ä»£ç è´¨é‡](#94-ä»£ç è´¨é‡)
- [9.5 å¼€å‘å·¥ä½œæµ](#95-å¼€å‘å·¥ä½œæµ)

### ç¬¬ 10 ç« ï¼šæœ€ä½³å®è·µ
- [10.1 é¡¹ç›®ç»„ç»‡](#101-é¡¹ç›®ç»„ç»‡)
- [10.2 æ€§èƒ½æœ€ä½³å®è·µ](#102-æ€§èƒ½æœ€ä½³å®è·µ)
- [10.3 å®‰å…¨è€ƒè™‘](#103-å®‰å…¨è€ƒè™‘)
- [10.4 å›¢é˜Ÿåä½œ](#104-å›¢é˜Ÿåä½œ)
- [10.5 å‡çº§å’Œç»´æŠ¤](#105-å‡çº§å’Œç»´æŠ¤)

---

## ğŸ¯ å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬æŒ‡å—åï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š
- æ·±å…¥ç†è§£ Vite çš„å·¥ä½œåŸç†å’Œæ ¸å¿ƒæ¦‚å¿µ
- ç†Ÿç»ƒé…ç½®å’Œå®šåˆ¶ Vite é¡¹ç›®
- æŒæ¡å„ç§æ¡†æ¶ä¸ Vite çš„é›†æˆ
- ä¼˜åŒ–æ„å»ºæ€§èƒ½å’Œå¼€å‘ä½“éªŒ
- éƒ¨ç½²å’Œç»´æŠ¤ Vite é¡¹ç›®

---

## ç¬¬ 1 ç« ï¼šVite åŸºç¡€å…¥é—¨

### 1.1 Vite æ˜¯ä»€ä¹ˆï¼Ÿ

Viteï¼ˆæ³•è¯­æ„ä¸º"å¿«é€Ÿ"ï¼Œå‘éŸ³ä¸º `/vit/`ï¼‰æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œç”± Vue.js ä½œè€…å°¤é›¨æºªåˆ›å»ºã€‚

#### æ ¸å¿ƒç‰¹ç‚¹

```javascript
// ä¼ ç»Ÿæ„å»ºå·¥å…·çš„å·¥ä½œæµç¨‹
å¼€å‘æ¨¡å¼: æ‰“åŒ…æ•´ä¸ªåº”ç”¨ â†’ å¯åŠ¨å¼€å‘æœåŠ¡å™¨ â†’ ä¿®æ”¹ä»£ç  â†’ é‡æ–°æ‰“åŒ…
æ„å»ºæ¨¡å¼: æ‰“åŒ…æ•´ä¸ªåº”ç”¨ â†’ è¾“å‡ºåˆ° dist

// Vite çš„å·¥ä½œæµç¨‹
å¼€å‘æ¨¡å¼: å¯åŠ¨å¼€å‘æœåŠ¡å™¨ â†’ æŒ‰éœ€ç¼–è¯‘ â†’ å³æ—¶çƒ­æ›´æ–°
æ„å»ºæ¨¡å¼: ä½¿ç”¨ Rollup æ‰“åŒ… â†’ ä¼˜åŒ–è¾“å‡º
```

#### æŠ€æœ¯æ¶æ„

```
Vite æ¶æ„
â”œâ”€â”€ å¼€å‘æœåŠ¡å™¨ (esbuild + ES modules)
â”‚   â”œâ”€â”€ ä¾èµ–é¢„æ„å»º (esbuild)
â”‚   â”œâ”€â”€ æºç è½¬æ¢ (æŒ‰éœ€ç¼–è¯‘)
â”‚   â””â”€â”€ HMR (çƒ­æ¨¡å—æ›¿æ¢)
â””â”€â”€ ç”Ÿäº§æ„å»º (Rollup)
    â”œâ”€â”€ ä»£ç åˆ†å‰²
    â”œâ”€â”€ å‹ç¼©ä¼˜åŒ–
    â””â”€â”€ èµ„æºå¤„ç†
```

### 1.2 ä¸ºä»€ä¹ˆé€‰æ‹© Viteï¼Ÿ

#### æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | Webpack | Vite |
|------|---------|------|
| å†·å¯åŠ¨æ—¶é—´ | æ…¢ï¼ˆéœ€è¦æ‰“åŒ…ï¼‰ | å¿«ï¼ˆå³æ—¶å¯åŠ¨ï¼‰ |
| çƒ­æ›´æ–°é€Ÿåº¦ | æ…¢ï¼ˆé‡æ–°æ‰“åŒ…ï¼‰ | æå¿«ï¼ˆæŒ‰éœ€æ›´æ–°ï¼‰ |
| æ„å»ºé€Ÿåº¦ | ä¸­ç­‰ | å¿«ï¼ˆesbuild + Rollupï¼‰ |
| é…ç½®å¤æ‚åº¦ | é«˜ | ä½ |

#### å¼€å‘ä½“éªŒ

```javascript
// å¯åŠ¨æ—¶é—´å¯¹æ¯”ï¼ˆå¤§å‹é¡¹ç›®ï¼‰
Webpack: 30-60 ç§’
Vite: 1-3 ç§’

// çƒ­æ›´æ–°æ—¶é—´å¯¹æ¯”
Webpack: 1-5 ç§’
Vite: 50-200 æ¯«ç§’
```

### 1.3 å®‰è£…å’Œå¿«é€Ÿå¼€å§‹

#### ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®

```bash
# npm 7+ï¼Œéœ€è¦é¢å¤–çš„åŒæ¨ªçº¿
npm create vite@latest my-vue-app -- --template vue

# yarn
yarn create vite my-vue-app --template vue

# pnpm
pnpm create vite my-vue-app --template vue
```

#### å¯ç”¨æ¨¡æ¿

```bash
# JavaScript æ¨¡æ¿
vanilla          # åŸç”Ÿ JavaScript
vanilla-ts       # TypeScript
vue              # Vue 3
vue-ts           # Vue 3 + TypeScript
react            # React
react-ts         # React + TypeScript
react-swc        # React + SWC
react-swc-ts     # React + SWC + TypeScript
preact           # Preact
preact-ts        # Preact + TypeScript
lit              # Lit
lit-ts           # Lit + TypeScript
svelte           # Svelte
svelte-ts        # Svelte + TypeScript
solid            # Solid
solid-ts         # Solid + TypeScript
qwik             # Qwik
qwik-ts          # Qwik + TypeScript
```

#### é¡¹ç›®åˆå§‹åŒ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd my-vue-app

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview
```

### 1.4 é¡¹ç›®ç»“æ„

```
my-vite-project/
â”œâ”€â”€ public/              # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ logo.png
â”œâ”€â”€ src/                 # æºç ç›®å½•
â”‚   â”œâ”€â”€ assets/          # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ components/      # ç»„ä»¶
â”‚   â”œâ”€â”€ views/          # é¡µé¢
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ main.js         # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ App.vue         # æ ¹ç»„ä»¶
â”œâ”€â”€ index.html          # HTML æ¨¡æ¿
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.js      # Vite é…ç½®
â””â”€â”€ README.md
```

#### å…¥å£æ–‡ä»¶è¯´æ˜

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
</head>
<body>
    <div id="app"></div>
    <!-- å…¥å£è„šæœ¬ -->
    <script type="module" src="/src/main.js"></script>
</body>
</html>
```

```javascript
// src/main.js
import { createApp } from 'vue'
import './style.css'
import App from './App.vue'

createApp(App).mount('#app')
```

### 1.5 å¼€å‘æœåŠ¡å™¨

#### åŸºæœ¬å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æŒ‡å®šç«¯å£
npm run dev -- --port 3000

# æŒ‡å®šä¸»æœº
npm run dev -- --host 0.0.0.0

# æ‰“å¼€æµè§ˆå™¨
npm run dev -- --open
```

#### å¼€å‘æœåŠ¡å™¨ç‰¹æ€§

```javascript
// 1. å³æ—¶æœåŠ¡å™¨å¯åŠ¨
// æ— éœ€ç­‰å¾…æ‰“åŒ…ï¼Œç«‹å³å¯åŠ¨

// 2. é—ªç”µèˆ¬çš„ HMR
// çƒ­æ¨¡å—æ›¿æ¢ï¼Œä¿æŒåº”ç”¨çŠ¶æ€

// 3. ä¸°å¯Œçš„åŠŸèƒ½
// - TypeScript æ”¯æŒ
// - JSX æ”¯æŒ
// - CSS é¢„å¤„ç†å™¨æ”¯æŒ
// - å¯¼å…¥åˆ«å
// - ç¯å¢ƒå˜é‡
```

---

## ç¬¬ 2 ç« ï¼šé…ç½®è¯¦è§£

### 2.1 é…ç½®æ–‡ä»¶

#### åŸºæœ¬é…ç½®æ–‡ä»¶

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  
  // å¼€å‘æœåŠ¡å™¨é…ç½®
  server: {
    port: 3000,
    open: true,
    host: true
  },
  
  // æ„å»ºé…ç½®
  build: {
    outDir: 'dist',
    sourcemap: true
  },
  
  // è·¯å¾„è§£æ
  resolve: {
    alias: {
      '@': '/src'
    }
  }
})
```

#### æ¡ä»¶é…ç½®

```javascript
// vite.config.js
import { defineConfig } from 'vite'

export default defineConfig(({ command, mode }) => {
  const config = {
    plugins: []
  }
  
  if (command === 'serve') {
    // å¼€å‘ç¯å¢ƒé…ç½®
    config.server = {
      port: 3000
    }
  } else {
    // ç”Ÿäº§ç¯å¢ƒé…ç½®
    config.build = {
      minify: 'terser'
    }
  }
  
  return config
})
```

#### TypeScript é…ç½®

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import type { UserConfig } from 'vite'

export default defineConfig({
  // é…ç½®é€‰é¡¹...
} as UserConfig)
```

### 2.2 å¼€å‘é…ç½®

#### æœåŠ¡å™¨é€‰é¡¹

```javascript
// vite.config.js
export default defineConfig({
  server: {
    // ç«¯å£å·
    port: 3000,
    
    // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    open: true,
    
    // ä¸»æœºåœ°å€
    host: '0.0.0.0',
    
    // HTTPS
    https: false,
    
    // ä»£ç†è®¾ç½®
    proxy: {
      '/api': {
        target: 'http://localhost:3001',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, '')
      }
    },
    
    // CORS
    cors: true,
    
    // é¢„çƒ­æ–‡ä»¶
    warmup: {
      clientFiles: ['./src/components/*.vue']
    }
  }
})
```

#### HMR é…ç½®

```javascript
// vite.config.js
export default defineConfig({
  server: {
    hmr: {
      port: 24678,
      overlay: true // é”™è¯¯è¦†ç›–å±‚
    }
  }
})
```

### 2.3 æ„å»ºé…ç½®

#### åŸºç¡€æ„å»ºé€‰é¡¹

```javascript
// vite.config.js
export default defineConfig({
  build: {
    // è¾“å‡ºç›®å½•
    outDir: 'dist',
    
    // èµ„æºç›®å½•
    assetsDir: 'assets',
    
    // ç”Ÿæˆ sourcemap
    sourcemap: true,
    
    // å‹ç¼©å™¨
    minify: 'terser', // 'terser' | 'esbuild'
    
    // Terser é€‰é¡¹
    terserOptions: {
      compress: {
        drop_console: true,
        drop_debugger: true
      }
    },
    
    // æ„å»ºç›®æ ‡
    target: 'es2015',
    
    // ä»£ç åˆ†å‰²
    rollupOptions: {
      input: {
        main: 'index.html',
        admin: 'admin.html'
      },
      output: {
        chunkFileNames: 'js/[name]-[hash].js',
        entryFileNames: 'js/[name]-[hash].js',
        assetFileNames: 'assets/[name]-[hash].[ext]'
      }
    },
    
    // è­¦å‘Šé˜ˆå€¼ï¼ˆKBï¼‰
    chunkSizeWarningLimit: 1500
  }
})
```

#### åº“æ¨¡å¼æ„å»º

```javascript
// vite.config.js
export default defineConfig({
  build: {
    lib: {
      entry: 'src/lib.js',
      name: 'MyLib',
      fileName: (format) => `my-lib.${format}.js`,
      formats: ['es', 'cjs', 'umd', 'iife']
    },
    rollupOptions: {
      external: ['vue'],
      output: {
        globals: {
          vue: 'Vue'
        }
      }
    }
  }
})
```

### 2.4 ç¯å¢ƒå˜é‡

#### ç¯å¢ƒå˜é‡æ–‡ä»¶

```bash
# .env                # æ‰€æœ‰ç¯å¢ƒåŠ è½½
# .env.local          # æ‰€æœ‰ç¯å¢ƒåŠ è½½ï¼Œgit å¿½ç•¥
# .env.development    # å¼€å‘ç¯å¢ƒåŠ è½½
# .env.production     # ç”Ÿäº§ç¯å¢ƒåŠ è½½
```

#### ç¯å¢ƒå˜é‡ç¤ºä¾‹

```bash
# .env.development
VITE_API_URL=http://localhost:3001/api
VITE_APP_TITLE=å¼€å‘ç¯å¢ƒ
VITE_ENABLE_DEBUG=true

# .env.production
VITE_API_URL=https://api.example.com
VITE_APP_TITLE=ç”Ÿäº§ç¯å¢ƒ
VITE_ENABLE_DEBUG=false
```

#### åœ¨ä»£ç ä¸­ä½¿ç”¨

```javascript
// è®¿é—®ç¯å¢ƒå˜é‡
console.log(import.meta.env.VITE_API_URL)
console.log(import.meta.env.VITE_APP_TITLE)

// ç¯å¢ƒåˆ¤æ–­
const isDev = import.meta.env.DEV
const isProd = import.meta.env.PROD
const mode = import.meta.env.MODE

// ç±»å‹å£°æ˜ (vite-env.d.ts)
interface ImportMetaEnv {
  readonly VITE_API_URL: string
  readonly VITE_APP_TITLE: string
  readonly VITE_ENABLE_DEBUG: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

### 2.5 è·¯å¾„åˆ«å

#### é…ç½®åˆ«å

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, 'src'),
      '@components': path.resolve(__dirname, 'src/components'),
      '@utils': path.resolve(__dirname, 'src/utils'),
      '@assets': path.resolve(__dirname, 'src/assets'),
      '@views': path.resolve(__dirname, 'src/views'),
      '@store': path.resolve(__dirname, 'src/store'),
      '@api': path.resolve(__dirname, 'src/api')
    }
  }
})
```

#### TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@utils/*": ["src/utils/*"],
      "@assets/*": ["src/assets/*"],
      "@views/*": ["src/views/*"],
      "@store/*": ["src/store/*"],
      "@api/*": ["src/api/*"]
    }
  }
}
```

#### ä½¿ç”¨ç¤ºä¾‹

```javascript
// ä½¿ç”¨åˆ«åå¯¼å…¥
import Header from '@components/Header.vue'
import { api } from '@api/index.js'
import logo from '@assets/logo.png'
import { formatDate } from '@utils/date.js'

// è€Œä¸æ˜¯ç›¸å¯¹è·¯å¾„
import Header from '../../components/Header.vue'
import { api } from '../../../api/index.js'
```

---

## ç¬¬ 3 ç« ï¼šæ’ä»¶ç³»ç»Ÿ

### 3.1 æ’ä»¶åŸºç¡€

#### æ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ

```javascript
// Vite æ’ä»¶æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–å¯¹è±¡
function myPlugin() {
  return {
    name: 'my-plugin',
    buildStart() {
      // æ„å»ºå¼€å§‹æ—¶æ‰§è¡Œ
    },
    transform(code, id) {
      // è½¬æ¢ä»£ç 
      return {
        code: transformedCode,
        map: sourceMap
      }
    }
  }
}

// ä½¿ç”¨æ’ä»¶
export default defineConfig({
  plugins: [myPlugin()]
})
```

#### æ’ä»¶é’©å­

```javascript
// é€šç”¨é’©å­ï¼ˆRollup é’©å­ï¼‰
buildStart    // æ„å»ºå¼€å§‹
buildEnd      // æ„å»ºç»“æŸ
generateBundle // ç”Ÿæˆ bundle
writeBundle   // å†™å…¥ bundle

// Vite ç‹¬æœ‰é’©å­
config        // é…ç½®è§£æå‰
configResolved // é…ç½®è§£æå
configureServer // é…ç½®å¼€å‘æœåŠ¡å™¨
transformIndexHtml // è½¬æ¢ index.html
handleHotUpdate // å¤„ç† HMR æ›´æ–°
```

### 3.2 å®˜æ–¹æ’ä»¶

#### Vue æ”¯æŒ

```bash
npm install @vitejs/plugin-vue
```

```javascript
// vite.config.js
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [
    vue({
      // Vue æ’ä»¶é€‰é¡¹
      include: [/\.vue$/, /\.md$/],
      reactivityTransform: true
    })
  ]
})
```

#### React æ”¯æŒ

```bash
npm install @vitejs/plugin-react
```

```javascript
// vite.config.js
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [
    react({
      // React æ’ä»¶é€‰é¡¹
      include: "**/*.{jsx,tsx}",
      babel: {
        plugins: ['@babel/plugin-transform-react-jsx']
      }
    })
  ]
})
```

#### Legacy æµè§ˆå™¨æ”¯æŒ

```bash
npm install @vitejs/plugin-legacy
```

```javascript
// vite.config.js
import legacy from '@vitejs/plugin-legacy'

export default defineConfig({
  plugins: [
    legacy({
      targets: ['defaults', 'not IE 11']
    })
  ]
})
```

### 3.3 ç¤¾åŒºæ’ä»¶

#### è‡ªåŠ¨å¯¼å…¥

```bash
npm install unplugin-auto-import
```

```javascript
// vite.config.js
import AutoImport from 'unplugin-auto-import/vite'

export default defineConfig({
  plugins: [
    AutoImport({
      imports: [
        'vue',
        'vue-router',
        '@vueuse/core'
      ],
      dts: true // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶
    })
  ]
})
```

#### ç»„ä»¶è‡ªåŠ¨å¯¼å…¥

```bash
npm install unplugin-vue-components
```

```javascript
// vite.config.js
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
    Components({
      resolvers: [ElementPlusResolver()]
    })
  ]
})
```

#### PWA æ”¯æŒ

```bash
npm install vite-plugin-pwa
```

```javascript
// vite.config.js
import { VitePWA } from 'vite-plugin-pwa'

export default defineConfig({
  plugins: [
    VitePWA({
      registerType: 'autoUpdate',
      workbox: {
        globPatterns: ['**/*.{js,css,html,ico,png,svg}']
      }
    })
  ]
})
```

### 3.4 è‡ªå®šä¹‰æ’ä»¶

#### ç®€å•æ’ä»¶ç¤ºä¾‹

```javascript
// plugins/console-plugin.js
export function consolePlugin() {
  return {
    name: 'console-plugin',
    transform(code, id) {
      if (id.endsWith('.vue') || id.endsWith('.js')) {
        // åœ¨ç”Ÿäº§ç¯å¢ƒç§»é™¤ console.log
        if (process.env.NODE_ENV === 'production') {
          code = code.replace(/console\.log\(.*?\);?/g, '')
        }
      }
      return {
        code,
        map: null
      }
    }
  }
}
```

#### è™šæ‹Ÿæ–‡ä»¶æ’ä»¶

```javascript
// plugins/virtual-file-plugin.js
export function virtualFilePlugin() {
  const virtualFiles = new Map()
  
  return {
    name: 'virtual-file',
    resolveId(id) {
      if (id.startsWith('virtual:')) {
        return id
      }
    },
    load(id) {
      if (id.startsWith('virtual:')) {
        return virtualFiles.get(id) || 'export default {}'
      }
    },
    configureServer(server) {
      // æ·»åŠ è™šæ‹Ÿæ–‡ä»¶
      virtualFiles.set('virtual:my-module', 'export const msg = "Hello from virtual file"')
    }
  }
}
```

#### å¼€å‘æ—¶æ’ä»¶

```javascript
// plugins/dev-plugin.js
export function devPlugin() {
  return {
    name: 'dev-plugin',
    apply: 'serve', // åªåœ¨å¼€å‘æ—¶åº”ç”¨
    configureServer(server) {
      server.middlewares.use('/api/mock', (req, res, next) => {
        if (req.url === '/api/mock/users') {
          res.setHeader('Content-Type', 'application/json')
          res.end(JSON.stringify([
            { id: 1, name: 'John' },
            { id: 2, name: 'Jane' }
          ]))
        } else {
          next()
        }
      })
    }
  }
}
```

### 3.5 æ’ä»¶é…ç½®

#### æ¡ä»¶åº”ç”¨æ’ä»¶

```javascript
// vite.config.js
export default defineConfig(({ command, mode }) => {
  const plugins = [vue()]
  
  // ä»…åœ¨æ„å»ºæ—¶åº”ç”¨
  if (command === 'build') {
    plugins.push(legacy())
  }
  
  // ä»…åœ¨å¼€å‘æ—¶åº”ç”¨
  if (command === 'serve') {
    plugins.push(devPlugin())
  }
  
  // æ ¹æ®ç¯å¢ƒåº”ç”¨
  if (mode === 'development') {
    plugins.push(mockPlugin())
  }
  
  return {
    plugins
  }
})
```

#### æ’ä»¶é¡ºåº

```javascript
// vite.config.js
export default defineConfig({
  plugins: [
    // pre æ’ä»¶ï¼ˆåœ¨ Vite å†…éƒ¨æ’ä»¶ä¹‹å‰è¿è¡Œï¼‰
    {
      ...somePlugin(),
      enforce: 'pre'
    },
    
    // æ­£å¸¸æ’ä»¶
    vue(),
    
    // post æ’ä»¶ï¼ˆåœ¨ Vite å†…éƒ¨æ’ä»¶ä¹‹åè¿è¡Œï¼‰
    {
      ...anotherPlugin(),
      enforce: 'post'
    }
  ]
})
```

---

## ç¬¬ 4 ç« ï¼šæ¡†æ¶é›†æˆ

### 4.1 Vue é¡¹ç›®

#### åˆ›å»º Vue é¡¹ç›®

```bash
# Vue 3
npm create vite@latest my-vue-app -- --template vue
npm create vite@latest my-vue-app -- --template vue-ts

# è¿›å…¥é¡¹ç›®
cd my-vue-app
npm install
npm run dev
```

#### Vue é…ç½®é€‰é¡¹

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [
    vue({
      // æ¨¡æ¿é€‰é¡¹
      template: {
        compilerOptions: {
          // è‡ªå®šä¹‰å…ƒç´ 
          isCustomElement: tag => tag.startsWith('my-')
        }
      },
      
      // è„šæœ¬è®¾ç½®
      script: {
        defineModel: true,
        propsDestructure: true
      },
      
      // æ ·å¼é€‰é¡¹
      style: {
        filename: 'style.css'
      },
      
      // åŒ…å«æ–‡ä»¶ç±»å‹
      include: [/\.vue$/, /\.md$/]
    })
  ]
})
```

#### Vue Router é›†æˆ

```bash
npm install vue-router@4
```

```javascript
// src/router/index.js
import { createRouter, createWebHistory } from 'vue-router'
import Home from '@/views/Home.vue'

const routes = [
  {
    path: '/',
    name: 'Home',
    component: Home
  },
  {
    path: '/about',
    name: 'About',
    // è·¯ç”±æ‡’åŠ è½½
    component: () => import('@/views/About.vue')
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

export default router
```

#### Pinia çŠ¶æ€ç®¡ç†

```bash
npm install pinia
```

```javascript
// src/stores/counter.js
import { defineStore } from 'pinia'

export const useCounterStore = defineStore('counter', {
  state: () => ({
    count: 0
  }),
  getters: {
    doubleCount: (state) => state.count * 2
  },
  actions: {
    increment() {
      this.count++
    }
  }
})
```

### 4.2 React é¡¹ç›®

#### åˆ›å»º React é¡¹ç›®

```bash
# React
npm create vite@latest my-react-app -- --template react
npm create vite@latest my-react-app -- --template react-ts

# React + SWC (æ›´å¿«çš„ç¼–è¯‘)
npm create vite@latest my-react-app -- --template react-swc
npm create vite@latest my-react-app -- --template react-swc-ts
```

#### React é…ç½®é€‰é¡¹

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [
    react({
      // JSX è¿è¡Œæ—¶
      jsxRuntime: 'automatic', // 'automatic' | 'classic'
      
      // Babel é…ç½®
      babel: {
        plugins: [
          ['@babel/plugin-transform-react-jsx', { runtime: 'automatic' }]
        ]
      },
      
      // åŒ…å«æ–‡ä»¶
      include: /\.(jsx|tsx)$/,
      
      // Fast Refresh
      fastRefresh: true
    })
  ]
})
```

#### React Router é›†æˆ

```bash
npm install react-router-dom
```

```jsx
// src/App.jsx
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import Home from './pages/Home'
import About from './pages/About'

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Home />} />
        <Route path="/about" element={<About />} />
      </Routes>
    </BrowserRouter>
  )
}

export default App
```

#### Redux Toolkit é›†æˆ

```bash
npm install @reduxjs/toolkit react-redux
```

```javascript
// src/store/index.js
import { configureStore, createSlice } from '@reduxjs/toolkit'

const counterSlice = createSlice({
  name: 'counter',
  initialState: { value: 0 },
  reducers: {
    increment: (state) => {
      state.value += 1
    },
    decrement: (state) => {
      state.value -= 1
    }
  }
})

export const { increment, decrement } = counterSlice.actions

export const store = configureStore({
  reducer: {
    counter: counterSlice.reducer
  }
})
```

### 4.3 Svelte é¡¹ç›®

#### åˆ›å»º Svelte é¡¹ç›®

```bash
npm create vite@latest my-svelte-app -- --template svelte
npm create vite@latest my-svelte-app -- --template svelte-ts
```

#### Svelte é…ç½®

```javascript
// vite.config.js
import { defineConfig } from 'vite'
import { svelte } from '@sveltejs/vite-plugin-svelte'

export default defineConfig({
  plugins: [
    svelte({
      // é¢„å¤„ç†å™¨
      preprocess: {
        style: ({ content, attributes }) => {
          if (attributes.lang === 'scss') {
            return sassPreprocess(content)
          }
        }
      },
      
      // ç¼–è¯‘é€‰é¡¹
      compilerOptions: {
        dev: process.env.NODE_ENV === 'development'
      },
      
      // çƒ­é‡è½½
      hot: {
        preserveLocalState: true
      }
    })
  ]
})
```

### 4.4 Vanilla JS

#### Vanilla JavaScript é¡¹ç›®

```bash
npm create vite@latest my-vanilla-app -- --template vanilla
npm create vite@latest my-vanilla-app -- --template vanilla-ts
```

#### é¡¹ç›®ç»“æ„

```
vanilla-project/
â”œâ”€â”€ index.html
â”œâ”€â”€ main.js
â”œâ”€â”€ style.css
â”œâ”€â”€ counter.js
â””â”€â”€ javascript.svg
```

#### æ¨¡å—åŒ–å¼€å‘

```javascript
// src/modules/utils.js
export function formatDate(date) {
  return new Intl.DateTimeFormat('zh-CN').format(date)
}

export function debounce(func, wait) {
  let timeout
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout)
      func(...args)
    }
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
  }
}
```

```javascript
// main.js
import './style.css'
import { formatDate, debounce } from './modules/utils.js'

document.querySelector('#app').innerHTML = `
  <div>
    <h1>Vanilla JavaScript + Vite</h1>
    <p>å½“å‰æ—¶é—´: ${formatDate(new Date())}</p>
  </div>
`
```

### 4.5 TypeScript æ”¯æŒ

#### TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    
    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    
    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    
    /* Path mapping */
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

#### ç¯å¢ƒç±»å‹å£°æ˜

```typescript
// src/vite-env.d.ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_API_URL: string
  readonly VITE_APP_TITLE: string
  // æ›´å¤šç¯å¢ƒå˜é‡...
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}
```

#### TypeScript å·¥å…·é…ç½®

```typescript
// src/types/index.ts
export interface User {
  id: number
  name: string
  email: string
}

export interface ApiResponse<T> {
  data: T
  message: string
  success: boolean
}

// å·¥å…·ç±»å‹
export type Partial<T> = {
  [P in keyof T]?: T[P]
}

export type Pick<T, K extends keyof T> = {
  [P in K]: T[P]
}
```

---

ç»§ç»­ä¸ºæ‚¨åˆ›å»ºå®Œæ•´çš„ Vite å­¦ä¹ ç¬”è®°...
